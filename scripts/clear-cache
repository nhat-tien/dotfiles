#!/usr/bin/env bash

success() {
    echo "Clear cache $1 successfully"
}

begin_clear() {
    echo "---> Cleaning $1 <----"
}

# chrome_cc() {
# Try to go to chrome://settings/clearBrowserData 
# and then select "All time" and unselect everything 
# but "Cached images and files".
# }

cargo_cc() {
  begin_clear "cargo"
  cargo cache --autoclean && \
    success "cargo"
}

phpactor_cc() {
    begin_clear "phpactor"

    if command -v php >/dev/null 2>&1; then
        has_php=1
    else
        echo "php not exist"
    fi

    if command -v phpactor >/dev/null 2>&1; then
        has_phpactor=1
    else
        echo "phpactor not exist"
    fi

    if [[ $has_php && $has_phpactor ]]; then
        phpactor cache:clear && \
            success "phpactor"
    fi
}

go_cc() {
    begin_clear "go"
    go clean -cache && \
        go clean -modcache && \
        go clean -testcache && \
        go clean -fuzzcache && \
        success "go"
}

docker_cc() {
    begin_clear "docker"
    docker builder prune && \
        success "docker"
}

nvim_cc() {
    begin_clear "nvim"
    rm -rf ~/.cache/nvim/luac/ && \
        success "nvim"
}

uv_cc() {
    begin_clear "uv"
    uv cache clean && \
        success "uv"
}

npm_cc() {
  begin_clear "npm"
  npm cache clean --force && \
    success "npm"
}

all_cc() {
    cargo_cc 
    phpactor_cc
    go_cc
    docker_cc
    nvim_cc
    uv_cc
    npm_cc
}

main() {
    program="${1}_cc"
    $program
}

main "$@"
